<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    </head>

    <body>

        <div style="padding: 2em 0;">
            <h2 style="text-align: center;"> 
                <div id="projectHeader"></div>
            </h2>
            <hr>
            <div id="projectDesc"></div>
            <hr>
            <div id="projectTarget">
                Собрано/Цель
                <br>
            </div>
            <ul id="projectStages"></ul>
            <hr>
            <div id="projectOwner"></div>


        </div>

        <script type="application/javascript">
            const urlParams = new URLSearchParams(window.location.search)
            const pid = urlParams.get("pid")
            $.get("/api/project?pid="+pid, function(data) {
                console.log(data);
                if (data.hasOwnProperty('project_info')) {
                    let project = data['project_info']
                    head = '<span>'+
                        project.Name
                        +'</span>';
                    $('#projectHeader').append(head);
                    desc = '<span>'+
                        project.Desc
                        +'</span>';
                    $('#projectDesc').append(desc);
                    target = '<span>'+
                        project.Sum + '/' + project.Target
                        +'</span>';
                    $('#projectTarget').append(target);
                }
                    
                if (data.hasOwnProperty('project_stages')) {
                    let stages = data['project_stages']
                    for (i = 0; i < stages.length; i++) {
                        stage = stages[i];
                        li = '<li id="stageID_'+stage.ID+'">' 
                            +'<span>'+'Этап '+(stage.ID+1)+'</span>'
                            +'<ul>'
                            +'<li>'+stage.Target+'</li>'
                            +'<li>'+stage.DueDate+'</li>'
                            +'</ul>'+'</li>';
                        $('#projectStages').append(li);

                    }
                }
                if (data.hasOwnProperty('project_info')) {
                    let project = data['project_info']
                    owner = '<span>'+
                            project.Owner
                            +'</span>';
                        $('#projectOwner').append(owner);
                }
                
        });      
        </script>

        <style>
            table {
                border: 1px solid black; /* Рамка вокруг таблицы */
                border-collapse: collapse; /* Отображать только одинарные линии */
                width: 100%;
                table-layout: fixed;
            }
            th {
                text-align: center; /* Выравнивание по левому краю */
                padding: 0 1em;
                border: 1px solid black; /* Граница вокруг ячеек */
                background-color: white;
            }
            td {
                text-align: center;
                border: 1px solid black;
                background-color: white;
                padding: 0 1em;
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
            }
            a {
                text-decoration: none;
            }
        </style>

    </body>
</html>

<!-- 
    ------------------
    |   desc         |
    |   desc ...     |
    |----------------|
    |   stages:       |
    |   - stage       |
    |   - stage ...   |
    |________________|
    - desc (может быть и большой строкой с описанием проекта), 
    - stages (описание целей, в виде списка)

    инфа будет приходить из ручки /api/project?pid=*id проекта*
-->